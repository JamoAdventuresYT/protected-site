<!DOCTYPE html>
<html>
<head>
  <title>Protected Site</title>
  <meta charset="UTF-8">
  <script>
    // ðŸ”’ Block unauthorized embeds:
    if (window.top !== window.self) {
      // Check if embedded inside your own Google Site
      const allowed = "https://sites.google.com/view/romrunner3000/romrunner";
      if (document.referrer.indexOf(allowed) !== 0) {
        document.body.innerHTML = "<h1>Unauthorized Embed</h1>";
      }
    }
  </script>
</head>
<body>
  <h1><html lang="en"><head><base target="_blank"><!-- rom-runner-no-popups.html â€” EmulatorJS frontend without popups --> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>ROM Runner â€” EmulatorJS frontend (no popups)</title> <style> body{ margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; background:#0f1720; color:#dbeafe; } header{ background:#071133; padding:12px 16px; display:flex; align-items:center; gap:12px; } header h1{ margin:0; font-size:1rem; } main{ padding:16px; display:grid; grid-template-columns:320px 1fr; gap:16px; height:calc(100vh - 64px); box-sizing:border-box; } .panel{ background:#071a2b; padding:12px; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,0.6); } label.drop{ display:flex; gap:8px; align-items:center; border:2px dashed #1e293b; padding:10px; border-radius:6px; cursor:pointer; } .controls{ display:flex; gap:8px; margin-top:10px; } button{ background:#0ea5e9; color:#042027; border:0; padding:8px 10px; border-radius:6px; cursor:pointer; font-weight:600; } select,input[type=file]{ width:100%; padding:8px; border-radius:6px; border:1px solid #0b1220; background:#071a2b; color:#dbeafe; } .small{ font-size:0.9rem; color:#9fb4cf; } #gameWrap{ width:100%; height:100%; min-height:360px; border-radius:8px; overflow:hidden; background:#000; display:flex; align-items:center; justify-content:center; } #game{ width:100%; height:100%; } footer{ padding:8px 16px; color:#8fa6c6; font-size:13px; background:#041028; } .note{ font-size:13px; color:#9fb4cf; margin-top:8px; } </style> </head> <body> <header> <h1>ROM Runner â€” pick a ROM and play (EmulatorJS)</h1> <div style="flex:1"></div> <div class="small">Uses EmulatorJS CDN. Works best on desktop browsers.</div> </header> <main> <div class="panel"> <div> <label class="drop" id="dropzone"> <span class="small">Drop ROM file here or</span> <button id="chooseBtn" type="button">Choose file</button> </label> <!-- ACCEPT LIST (includes Genesis .md /.smd /.gen) --> <input id="fileInput" type="file" accept=".gb,.gbc,.gba,.nes,.smc,.sfc,.zip,.iso,.n64,.nds,.bin,.pbp,.psx,.7z,.md,.smd,.gen" style="display:none"> </div> <div class="controls"> <select id="systemSelect" title="Choose system (auto-detected by extension)"> <option value="">Auto-detect system</option> <option value="gb">Game Boy (.gb/.gbc)</option> <option value="gba">Game Boy Advance (.gba)</option> <option value="nes">NES (.nes)</option> <option value="snes">SNES (.sfc/.smc)</option> <option value="n64">N64 (.n64/.z64/.v64)</option> <option value="nds">Nintendo DS (.nds)</option> <option value="psx">PlayStation (PS1 .iso/.bin/.cue/.pbp)</option> <option value="pce">PC Engine / TG16</option> <option value="segaMD">Genesis / Mega Drive (.md/.smd/.gen)</option> </select> <button id="loadBtn">Load ROM</button> </div> <div class="note" id="fileInfo">No ROM selected.</div> <div class="note" style="margin-top:12px;"> Notes: <ul style="margin:6px 0 0 18px; padding:0; color:#9fb4cf;"> <li>Some cores need a BIOS file (PS1, some CD systems) â€” the emulator will alert you.</li> <li>If a core can't be auto-detected the emulator UI will allow you to pick one â€” no popups will interrupt loading.</li> <li>Browser support for 3DS is limited â€” use native Citra for 3DS work.</li> </ul> </div> </div> <div id="gameWrap" class="panel"> <div id="game">No game loaded â€” pick a ROM from the left panel.</div> </div> </main> <footer> Built with EmulatorJS (CDN). If you want to embed this in Google Sites host this file and embed via an iframe. </footer> <script> (function(){ const chooseBtn = document.getElementById('chooseBtn'); const fileInput = document.getElementById('fileInput'); const dropzone = document.getElementById('dropzone'); const loadBtn = document.getElementById('loadBtn'); const fileInfo = document.getElementById('fileInfo'); const systemSelect = document.getElementById('systemSelect'); const gameWrap = document.getElementById('game'); const EMU_CDN = 'https://cdn.emulatorjs.org/stable/data/loader.js'; let pickedFile = null; let blobUrl = null; let currentLoaderScript = null; chooseBtn.addEventListener('click', ()=> fileInput.click()); fileInput.addEventListener('change', (e)=> { pickedFile = e.target.files[0]; updateFileInfo(); }); // drag/drop ['dragenter','dragover'].forEach(ev => dropzone.addEventListener(ev, e=>{ e.preventDefault(); e.stopPropagation(); dropzone.style.border = '2px dashed #06b6d4'; })); ['dragleave','drop'].forEach(ev => dropzone.addEventListener(ev, e=>{ e.preventDefault(); e.stopPropagation(); dropzone.style.border='2px dashed #1e293b'; })); dropzone.addEventListener('drop', e=>{ const f = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0]; if(f){ pickedFile = f; updateFileInfo(); fileInput.files = e.dataTransfer.files; } }); function updateFileInfo(){ if(!pickedFile){ fileInfo.textContent = 'No ROM selected.'; return; } fileInfo.textContent = `Selected: ${pickedFile.name} (${Math.round(pickedFile.size/1024)} KB)`; } // --- core detection mapping (Genesis uses 'segaMD' for EmulatorJS) --- function extToCore(name){ const ext = (name.split('.').pop()||'').toLowerCase(); switch(ext){ case 'gb': case 'gbc': return 'gb'; case 'gba': return 'gba'; case 'nes': return 'nes'; case 'sfc': case 'smc': return 'snes'; case 'n64': case 'z64': case 'v64': return 'n64'; case 'nds': return 'nds'; case 'iso': case 'pbp': return 'psx'; case 'psx': return 'psx'; case 'pce': case 'sgx': return 'pce'; case 'md': case 'smd': case 'gen': return 'segaMD'; case 'zip': return ''; // allow manual select case 'bin': return ''; // ambiguous: try to detect by content default: return ''; } } // Heuristic for ambiguous .bin files (Genesis SEGA header at 0x100, CD001 at 0x8001) async function detectCoreFromBin(file){ try{ const buf = await file.slice(0, 65536).arrayBuffer(); const view = new Uint8Array(buf); if(view.length > 0x100 + 4){ let s = String.fromCharCode(view[0x100],view[0x101],view[0x102],view[0x103]); if(s === 'SEGA') return 'segaMD'; } if(view.length > 0x8001 + 5){ const offset = 0x8001; let s = ''; for(let i=0;i<5;i++) s += String.fromCharCode(view[offset + i]); if(s.startsWith('CD001')) return 'psx'; } }catch(e){ console.warn('Detect bin failed', e); } return ''; } function clearPreviousEmulator(){ if(blobUrl){ try{ URL.revokeObjectURL(blobUrl); }catch(e){} blobUrl=null; } if(currentLoaderScript){ currentLoaderScript.remove(); currentLoaderScript = null; } gameWrap.innerHTML = ''; const d = document.createElement('div'); d.id = 'game'; d.style.width = '100%'; d.style.height = '100%'; gameWrap.appendChild(d); } async function startEmulatorWithBlob(file, coreOverride){ clearPreviousEmulator(); blobUrl = URL.createObjectURL(file); // decide core: dropdown override -> ext -> heuristics for bin let core = coreOverride || systemSelect.value || extToCore(file.name) || ''; if(!core && file.name.toLowerCase().endsWith('.bin')){ const detected = await detectCoreFromBin(file); if(detected) core = detected; } // **NEW BEHAVIOR**: do NOT prompt. If core not detected, proceed with empty core so EmulatorJS UI can handle it. if(!core){ console.warn('Core not detected automatically; loading emulator UI. You can select the system inside the emulator UI if needed.'); core = ''; // leave empty so loader shows UI } // set globals expected by EmulatorJS window.EJS_player = '#game'; window.EJS_gameUrl = blobUrl; window.EJS_core = core; window.EJS_pathtodata = 'https://cdn.emulatorjs.org/stable/data/'; // append loader script (cache-busted) const script = document.createElement('script'); script.src = EMU_CDN + '?_=' + Date.now(); script.async = true; document.body.appendChild(script); currentLoaderScript = script; } loadBtn.addEventListener('click', async ()=>{ if(!pickedFile) return alert('Pick a ROM file first.'); // **NO POPUP** for large files â€” just load them const selectedCore = systemSelect.value || ''; await startEmulatorWithBlob(pickedFile, selectedCore); }); window.addEventListener('beforeunload', ()=>{ if(blobUrl) try{ URL.revokeObjectURL(blobUrl); }catch(e){} }); })(); </script> </body></html>a</h1>
</body>
</html>
